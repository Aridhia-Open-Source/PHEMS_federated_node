suite: Missing secrets failures
release:
  namespace: federatednode
  name: federatednode
values:
  - ../values/values-aws.yaml
kubernetesProvider:
  scheme:
    v1/Secret:
      gvr:
        version: v1
        resource: secrets
      namespaced: true
    v1/ConfigMap:
      gvr:
        version: v1
        resource: configmaps
      namespaced: true
  objects:
    - apiVersion: v1
      kind: Secret
      metadata:
        name: local-db
        namespace: federatednode
      type: Opaque
      data:
        password: dGVzdA==
tests:
  - it: fails without expected aws certs secret
    template: certificates/issuer.yaml
    asserts:
      - failedTemplate:
          errorMessage: Secret awscert-config not found in namespace federatednode
